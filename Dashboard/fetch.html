<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Editable Users Data</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 20px; }
    .section { margin-top: 30px; }
  </style>
</head>
<body>

  <h3 class="mb-4">Fetch & Edit Users Data</h3>
  <button id="fetchBtn" class="btn btn-primary">Click Here</button>

  <!-- Sections -->
  <div id="cardSection" class="section"></div>
  <div id="tableSection" class="section"></div>
  <div id="listSection" class="section"></div>

  <!-- Edit Modal -->
  <div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="editForm">
          <div class="modal-header">
            <h5 class="modal-title">Edit User</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="editId">
            <div class="mb-2">
              <label class="form-label">Name</label>
              <input type="text" id="editName" class="form-control">
            </div>
            <div class="mb-2">
              <label class="form-label">Email</label>
              <input type="email" id="editEmail" class="form-control">
            </div>
            <div class="mb-2">
              <label class="form-label">Phone</label>
              <input type="text" id="editPhone" class="form-control">
            </div>
            <div class="mb-2">
              <label class="form-label">Company</label>
              <input type="text" id="editCompany" class="form-control">
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Save</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let users = []; // store fetched users
    let editModal;

    document.getElementById("fetchBtn").addEventListener("click", async () => {
      const response = await fetch("https://jsonplaceholder.typicode.com/users");
      users = await response.json();
      renderAll();
    });

    function renderAll() {
      renderCards();
      renderTable();
      renderList();
    }

    // --- Render Cards ---
    function renderCards() {
      let html = `<h4>Card Layout</h4><div class="row">`;
      users.forEach(user => {
        html += `
          <div class="col-md-4 mb-3">
            <div class="card shadow-sm">
              <div class="card-body">
                <h5 class="card-title">${user.name}</h5>
                <p><strong>Email:</strong> ${user.email}</p>
                <p><strong>Phone:</strong> ${user.phone}</p>
                <p><strong>Company:</strong> ${user.company.name}</p>
                <button class="btn btn-sm btn-warning" onclick="openEdit(${user.id})">Edit</button>
              </div>
            </div>
          </div>`;
      });
      html += `</div>`;
      document.getElementById("cardSection").innerHTML = html;
    }

    // --- Render Table ---
    function renderTable() {
      let html = `
        <h4>Table Layout</h4>
        <table class="table table-bordered table-striped">
          <thead class="table-dark">
            <tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Company</th><th>Action</th></tr>
          </thead><tbody>`;
      users.forEach(user => {
        html += `
          <tr>
            <td>${user.id}</td>
            <td>${user.name}</td>
            <td>${user.email}</td>
            <td>${user.phone}</td>
            <td>${user.company.name}</td>
            <td><button class="btn btn-sm btn-warning" onclick="openEdit(${user.id})">Edit</button></td>
          </tr>`;
      });
      html += `</tbody></table>`;
      document.getElementById("tableSection").innerHTML = html;
    }

    // --- Render List ---
    function renderList() {
      let html = `<h4>List Layout</h4><ul class="list-group">`;
      users.forEach(user => {
        html += `
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><strong>${user.name}</strong> â€” ${user.email}, ${user.phone}, ${user.company.name}</span>
            <button class="btn btn-sm btn-warning" onclick="openEdit(${user.id})">Edit</button>
          </li>`;
      });
      html += `</ul>`;
      document.getElementById("listSection").innerHTML = html;
    }

    // --- Open Edit Modal ---
    function openEdit(id) {
      const user = users.find(u => u.id === id);
      document.getElementById("editId").value = user.id;
      document.getElementById("editName").value = user.name;
      document.getElementById("editEmail").value = user.email;
      document.getElementById("editPhone").value = user.phone;
      document.getElementById("editCompany").value = user.company.name;
      editModal = new bootstrap.Modal(document.getElementById("editModal"));
      editModal.show();
    }

    // --- Save Edit ---
    document.getElementById("editForm").addEventListener("submit", e => {
      e.preventDefault();
      const id = parseInt(document.getElementById("editId").value);
      const user = users.find(u => u.id === id);
      user.name = document.getElementById("editName").value;
      user.email = document.getElementById("editEmail").value;
      user.phone = document.getElementById("editPhone").value;
      user.company.name = document.getElementById("editCompany").value;
      renderAll();
      editModal.hide();
    });
  </script>
</body>
</html>
